# ft5336 Touchscreen controller 
<!-- [![Docs](https://img.shields.io/crates/v/tsl256x.svg)](https://crates.io/crates/tsl256x) [![Docs](https://docs.rs/tsl256x/badge.svg)](https://docs.rs/tsl256x) -->

> Platform agnostic driver for FT5336 touch screen controller built using the embedded-hal. The FT5336 is an I2C driven controller used in the STM32F746 DISCOVERY board. I cannot find a datasheet for it, so much of this comes from the STMicroelectronics Github pages: https://github.com/STMicroelectronics/stm32-ft5336 generated by the STM32Cube.

The FT5336 is a member of a family, but this code has only been tested on the single device, and only in a limited manner.

This device driver is based on the interface of the tsl256x device driver by Josh McGuigan (https://github.com/JoshMcguigan/tsl256x) and is largely in line with the thoughts expressed on his blog: https://www.joshmcguigan.com/blog/tsl256x-light-intensity-sensor-driver/ . It does not consume the I2C device, allowing for other devices to be on the same bus. That's not important on the STM32F7 Disco, but might be useful in other applications.


## What works

- Getting raw sensor readings for both visible+IR spectrum and IR-only spectrum
- Using one of the three built in slave addresses, or any custom address
- Powering the chip on/off to conserve energy
- Setting sensor gain and integration time

## TODO

- [ ] Add method to perform lux calculation (requires nostd implementation of exponentiation for f32)
- [ ] Add method to setup interrupts
- [ ] Support the TSL2560 (SPI version)

## Example

<!-- ```rust
    extern crate tsl256x;
    use tsl256x::{Tsl2561, SlaveAddr};
    
    let sensor = Tsl2561::new(&mut i2c, SlaveAddr::default().addr()).unwrap();
    sensor.power_on(&mut i2c); 
    
    // Note sensor readings are zero until one integration period (default 400ms) after power on
    iprintln!(&mut cp.ITM.stim[0], "IR+Visible: {}, IR Only: {}",
                        sensor.visible_and_ir_raw(&mut i2c).unwrap(),
                        sensor.ir_raw(&mut i2c).unwrap());
``` -->
    
## License

Licensed under either of

 * Apache License, Version 2.0, ([LICENSE-APACHE](LICENSE-APACHE) or http://www.apache.org/licenses/LICENSE-2.0)
 * MIT license ([LICENSE-MIT](LICENSE-MIT) or http://opensource.org/licenses/MIT)

at your option.

### Contribution

Unless you explicitly state otherwise, any contribution intentionally submitted
for inclusion in the work by you, as defined in the Apache-2.0 license, shall be dual licensed as above, without any
additional terms or conditions.